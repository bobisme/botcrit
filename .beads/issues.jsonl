{"id":"bd-124","title":"Implement AppendLog with file locking","description":"Create AppendLog trait and FileLog implementation. Use fs2 crate for advisory file locks. Support atomic appends from multiple concurrent agents. Handle lock contention gracefully.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:03:51.953122137Z","created_by":"bob","updated_at":"2026-01-25T13:42:00.539414630Z","closed_at":"2026-01-25T13:42:00.539401355Z","close_reason":"Implemented with tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-124","depends_on_id":"bd-jc0","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-12q","title":"(resolved) Research: TOON format implementation","description":"RESOLVED: toon-rust crate exists at https://github.com/toon-format/toon-rust - use that.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:35.609073517Z","created_by":"bob","updated_at":"2026-01-25T13:42:14.011403475Z","closed_at":"2026-01-25T13:42:14.011386823Z","close_reason":"Implemented","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-12q","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-13u","title":"Feature: allow creating comments without explicit thread creation","description":"Currently agents must:\n1. crit threads create <review> --file <file> --lines <lines>\n2. crit comments add <thread_id> <message>\n\nThis is confusing - agents expect to just leave a comment on a line.\n\nIMPLEMENTATION (Option 1 - Auto-create thread):\nAdd new command: crit comment <review> --file <file> --line <line> <message>\n- If no thread exists at that location, create one automatically\n- If thread exists at same file+line, add comment to existing thread\n- Single command instead of two\n\nThis is a breaking change in UX (new preferred workflow), so bump to v0.2.0.\n\nSubtasks:\n- Add 'crit comment' command (alias for combined thread+comment)\n- Auto-detect existing thread at same file+line\n- Update help text and examples\n- Update AGENTS.md instructions","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T20:15:55.821869630Z","created_by":"bob","updated_at":"2026-01-26T20:54:55.971030139Z","closed_at":"2026-01-26T20:54:55.970980166Z","close_reason":"Implemented: crit comment command with auto-thread creation","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-144","title":"Implement projection sync","description":"Read events.jsonl and apply to SQLite. Track last processed line for incremental sync. Handle full rebuild when DB is missing/corrupted.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:06.870800492Z","created_by":"bob","updated_at":"2026-01-25T13:50:33.656966806Z","closed_at":"2026-01-25T13:50:33.656948231Z","close_reason":"Implemented with full sync and event application","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-144","depends_on_id":"bd-26n","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-144","depends_on_id":"bd-3h7","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-144","depends_on_id":"bd-w6q","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-14f","title":"Remove redundant selection glyph from TUI lists","description":"The triangular glyph takes up space but is redundant since we highlight the selected line.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-25T21:58:57.999294400Z","created_by":"bob","updated_at":"2026-01-25T22:03:09.373465258Z","closed_at":"2026-01-25T22:03:09.373434300Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-15o","title":"Review diff should show all changed files from parent, not just since creation","description":"Currently reviews use changed_files_between(initial_commit, target) which shows only files that changed AFTER the review was created. For fresh reviews, this shows nothing.\n\nShould use: changed_files_between(parent_of_initial, target) to show ALL files in the change being reviewed.\n\nAffects: TUI file list, crit diff command","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T23:16:56.854850224Z","created_by":"bob","updated_at":"2026-01-26T19:25:09.779161703Z","closed_at":"2026-01-26T19:25:09.779139221Z","close_reason":"Fixed: diff now uses parent(initial_commit) as base to show all changed files","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-168","title":"Query API for reviews/threads/comments","description":"Implement query functions: list_reviews(), get_review(), list_threads(), get_thread(), list_comments(). Support filtering by status, author, file path.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:08.450310672Z","created_by":"bob","updated_at":"2026-01-25T14:19:41.705567008Z","closed_at":"2026-01-25T14:19:41.705548884Z","close_reason":"Implemented query API with 23 tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-168","depends_on_id":"bd-144","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-168","depends_on_id":"bd-26n","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-18s","title":"crit reviews subcommands","description":"Implement reviews create, list, show, request, approve, abandon. Wire up to event log and projection queries.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:42.399891452Z","created_by":"bob","updated_at":"2026-01-25T16:51:04.174298384Z","closed_at":"2026-01-25T16:51:04.174274369Z","close_reason":"Implemented reviews create/list/show/request/approve/abandon with TOON and JSON output","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-18s","depends_on_id":"bd-168","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-18s","depends_on_id":"bd-1sj","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-18s","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-18s","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-18s","depends_on_id":"bd-351","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-18s","depends_on_id":"bd-hk6","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1cp","title":"Add reviews merge command","description":"Complete the review lifecycle by adding 'crit reviews merge <id>' to mark a review as merged. Should accept --commit flag or auto-detect from jj.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:33:18.859492164Z","created_by":"bob","updated_at":"2026-01-25T17:36:08.364049050Z","closed_at":"2026-01-25T17:36:08.364026728Z","close_reason":"Added reviews merge command with auto-detection from current commit","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1eh","title":"Add --verbose to threads list to show comment bodies","description":"Currently `crit threads list` only shows thread metadata:\n\n```\n[14]{comment_count,file_path,selection_end,selection_start,status,thread_id}:\n  0,src/attach.rs,150,144,open,th-lkxz\n  ...\n```\n\nAdd `--verbose` flag to include the first comment body (or all comments) inline:\n\n```bash\ncrit threads list cr-xxx --verbose\n```\n\nWould show:\n```\nth-lkxz src/attach.rs:144-150 (open, 1 comment)\n  [MEDIUM] Terminal restoration is fragile. The Drop-based cleanup...\n\nth-zrao src/attach.rs:204-259 (resolved, 1 comment)  \n  [HIGH] Unbounded buffer growth enables DoS...\n```","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-27T19:16:31.362314738Z","created_by":"bob","updated_at":"2026-01-27T19:33:39.267060118Z","closed_at":"2026-01-27T19:33:39.266990708Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1fk","title":"Research diff rendering options (delta, pure-Rust, etc)","description":"Evaluate options for side-by-side diff rendering:\n1. Shell out to delta if available\n2. Shell out to diff-so-fancy if available  \n3. Pure Rust implementation parsing jj diff --git\n4. Existing Rust crates (similar-asserts, etc)\n\nConsider: syntax highlighting, line number alignment, inline comment integration feasibility, fallback strategy.\n\nReference: opencode's diff format as inspiration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T21:39:18.758140987Z","created_by":"bob","updated_at":"2026-01-25T21:42:00.786425787Z","closed_at":"2026-01-25T21:42:00.786355185Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1j2","title":"TUI: review list and navigation","description":"Main screen showing list of reviews.\n\n- List view with status, title, author, comment count\n- Filter by status (open/merged/all)\n- Enter to open review detail view\n- Basic vim-style navigation (j/k, gg, G)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-26T21:13:21.147439570Z","created_by":"bob","updated_at":"2026-01-28T20:39:05.217948089Z","closed_at":"2026-01-28T20:39:05.217928162Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1j2","depends_on_id":"bd-2rx","type":"blocks","created_at":"2026-01-26T21:13:24.739362062Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1j7","title":"crit doctor command","description":"Health check command that verifies: jj installed and repo is jj-managed, .crit/ exists and is valid, events.jsonl is parseable, index.db is in sync. Output clear pass/fail for each check with remediation hints.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:24:35.766662909Z","created_by":"bob","updated_at":"2026-01-25T16:59:06.286116211Z","closed_at":"2026-01-25T16:59:06.286088068Z","close_reason":"Implemented doctor health check with jj/crit/events/sync validation and remediation hints","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1j7","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-1j7","depends_on_id":"bd-27u","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-1j7","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1jl","title":"Rename tui command to ui","description":"Simple rename: 'crit tui' -> 'crit ui'","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-25T21:39:15.441719413Z","created_by":"bob","updated_at":"2026-01-25T21:42:31.820150530Z","closed_at":"2026-01-25T21:42:31.820126665Z","close_reason":"Renamed tui -> ui","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1mo","title":"Add crit inbox command","description":"Add a command showing reviews/threads awaiting the current agent's response:\n\n```bash\ncrit inbox\n# Reviews where you're a reviewer and haven't voted\n# Threads where you were @mentioned\n# Threads you opened that have new responses\n```\n\nHelps agents quickly identify where their attention is needed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T00:05:54.347602783Z","created_by":"bob","updated_at":"2026-01-28T00:47:47.376438468Z","closed_at":"2026-01-28T00:47:47.376414013Z","close_reason":"Implemented crit inbox command showing reviews awaiting vote, threads with new responses, and open feedback on authored reviews","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1re","title":"Add batch thread resolve","description":"Allow resolving multiple threads in one command: crit threads resolve th-xxx th-yyy th-zzz --reason 'All fixed'","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T17:33:21.017340977Z","created_by":"bob","updated_at":"2026-01-25T17:40:44.749711582Z","closed_at":"2026-01-25T17:40:44.749684471Z","close_reason":"Implemented batch thread resolve - can now pass multiple thread IDs to 'crit threads resolve'","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1rh","title":"Document thread drift status meanings","description":"Thread listings show drift status like `shifted(+10)`, `deleted` but it's unclear what action (if any) is expected.\n\nQuestions to address in docs:\n- Does `deleted` mean the code was removed entirely?\n- Should threads auto-update their line references on rebase?\n- What's the expected workflow when code drifts significantly?\n\nMay also want a `crit threads refresh <review_id>` to update line numbers.","status":"closed","priority":3,"issue_type":"docs","created_at":"2026-01-28T00:05:54.356970188Z","created_by":"bob","updated_at":"2026-01-28T18:11:53.769031435Z","closed_at":"2026-01-28T18:11:53.768998082Z","close_reason":"Documented drift status meanings in spec.md and testing.md (unchanged/shifted/modified/deleted) and workflow guidance","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1sc","title":"UI redesign: GitHub-style review interface","description":"Redesign TUI to be document-centric like GitHub:\n- Review list as entry point (open reviews at top)\n- Enter to select review -> shows diff with inline comments\n- Side-by-side diff (unified as fallback)\n- Files in scrollable stream with collapsible sections\n- File list pane on left when space permits\n- Inline comment threads (configurable: auto-expand on focus or manual)","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-25T21:39:21.917226892Z","created_by":"bob","updated_at":"2026-01-25T22:53:50.895971579Z","closed_at":"2026-01-25T22:53:50.895946562Z","close_reason":"Core TUI is functional with review list, detail view, diff rendering, file navigation, and comment display","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1sc","depends_on_id":"bd-14f","type":"blocks","created_at":"2026-01-25T21:59:02.292226724Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-1sc","depends_on_id":"bd-1wr","type":"blocks","created_at":"2026-01-25T21:59:01.975920456Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-1sc","depends_on_id":"bd-3ey","type":"blocks","created_at":"2026-01-25T21:59:02.132423372Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-1sc","depends_on_id":"bd-4mo","type":"blocks","created_at":"2026-01-25T21:59:01.647259092Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-1sc","depends_on_id":"bd-knb","type":"blocks","created_at":"2026-01-25T21:59:01.812556491Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-1sj","title":"ID generation (slugs)","description":"Implement short ID generation for reviews (cr-xxx), threads (th-xxx), comments (c-xxx). Should be collision-resistant and human-readable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:03:55.529780553Z","created_by":"bob","updated_at":"2026-01-25T13:42:00.532818566Z","closed_at":"2026-01-25T13:42:00.532790253Z","close_reason":"Implemented with tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1sj","depends_on_id":"bd-jc0","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-1st","title":"Add --since filter for seeing new activity","description":"When re-reviewing, there's no way to see what changed since last visit. Add filtering options:\n\n```bash\ncrit threads list cr-klwd --with-new-comments\ncrit review cr-klwd --since 2026-01-27T23:00:00\ncrit review cr-klwd --since-vote  # since my last vote/comment\n```\n\nThis helps agents know where to focus attention on follow-up reviews.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T00:05:54.347704664Z","created_by":"bob","updated_at":"2026-01-28T00:23:54.044095014Z","closed_at":"2026-01-28T00:23:54.044059438Z","close_reason":"Implemented --since flag for crit review and crit threads list","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1we","title":"Add --needs-review filter to reviews list","description":"Filter reviews where the current agent is a requested reviewer. Usage: crit reviews list --needs-review","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:33:19.753739215Z","created_by":"bob","updated_at":"2026-01-25T17:37:48.555289290Z","closed_at":"2026-01-25T17:37:48.555251659Z","close_reason":"Added --needs-review filter based on current agent identity","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1wr","title":"TUI diff has excessive blank lines (delta width)","description":"Delta side-by-side output has too many blank lines, likely because width=200 is too wide. Should pass actual terminal width to delta.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-25T21:58:50.684358047Z","created_by":"bob","updated_at":"2026-01-25T22:02:44.902840141Z","closed_at":"2026-01-25T22:02:44.902812199Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-20l","title":"Make generated AGENTS.md instructions more concise","description":"The crit agent instructions generated by 'crit agents init' are verbose. Condense them while preserving essential info for agents.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-27T20:30:58.500484362Z","created_by":"bob","updated_at":"2026-01-27T20:31:47.698957180Z","closed_at":"2026-01-27T20:31:47.698927514Z","close_reason":"Reduced from 121 to 31 lines","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-21c","title":"clap command structure","description":"Define CLI structure with clap: crit init, crit reviews {create,list,show,request,approve,abandon}, crit threads {create,list,show,resolve,reopen}, crit comments {add,list}, crit status, crit diff. Include global --json flag.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:37.916924937Z","created_by":"bob","updated_at":"2026-01-25T13:42:14.001157855Z","closed_at":"2026-01-25T13:42:14.001139561Z","close_reason":"Implemented","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-21c","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-25a","title":"TUI (ratatui)","description":"Interactive terminal UI for code review - lower priority","status":"closed","priority":3,"issue_type":"epic","created_at":"2026-01-25T04:05:00.607245091Z","created_by":"bob","updated_at":"2026-01-25T22:53:50.908593065Z","closed_at":"2026-01-25T22:53:50.908570813Z","close_reason":"Core TUI is functional with review list, detail view, diff rendering, file navigation, and comment display","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-25z","title":"Standardize CLI argument names","description":"Inconsistent arg names hurt discoverability. Changes needed:\n- Use --description everywhere (allow --desc as alias)\n- Consider --message for comments instead of positional MESSAGE\n- Audit all commands for consistency","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-25T18:19:54.521745793Z","created_by":"bob","updated_at":"2026-01-25T19:46:33.528804467Z","closed_at":"2026-01-25T19:46:33.528783668Z","close_reason":"Implemented: --description with --desc alias, --message/--msg for comments, --reviewer alias for reviewers","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-26n","title":"Projection Engine","description":"SQLite-based query layer for efficient reads from the event log","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T04:04:01.784271737Z","created_by":"bob","updated_at":"2026-01-25T13:42:03.951644162Z","closed_at":"2026-01-25T13:42:03.951626559Z","close_reason":"Projection epic complete - schema designed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-27u","title":"JJ command wrapper","description":"Create JjRepo struct that wraps std::process::Command calls to jj. Methods: get_current_change_id(), get_current_commit(), diff_files(), show_file_at_commit(). Handle jj not installed gracefully.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:21.956812968Z","created_by":"bob","updated_at":"2026-01-25T13:50:34.428801589Z","closed_at":"2026-01-25T13:50:34.428779367Z","close_reason":"Implemented with all jj commands wrapped","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27u","depends_on_id":"bd-2ws","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-27u","depends_on_id":"bd-3q7","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-287","title":"Add --has-unresolved filter to reviews list","description":"Filter reviews that have at least one unresolved thread. Useful for finding reviews that need attention.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T17:33:23.287855096Z","created_by":"bob","updated_at":"2026-01-25T17:37:48.682318086Z","closed_at":"2026-01-25T17:37:48.682292037Z","close_reason":"Added --has-unresolved filter to show reviews with open threads","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-28d","title":"Drift detection algorithm","description":"Implement line mapping from original_commit to current_commit. Parse unified diff format. Calculate current line numbers for threads. Detect when anchored lines are modified/deleted (Detached status).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:24.106438195Z","created_by":"bob","updated_at":"2026-01-25T14:19:41.591014281Z","closed_at":"2026-01-25T14:19:41.590994113Z","close_reason":"Implemented drift detection with diff parsing","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-28d","depends_on_id":"bd-27u","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-28d","depends_on_id":"bd-3q7","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2bd","title":"Document thread/comment workflow for agents","description":"The AGENTS.md or README should explicitly document that:\n\n1. `threads create` only creates the thread container - you MUST call `comments add` to write actual feedback\n2. Provide a complete example workflow for agents:\n\n```bash\n# Create review\ncrit reviews create --title \"...\"\n\n# Add feedback (currently requires two steps)\nTHREAD=$(crit threads create cr-xxx --file foo.rs --line 42 --json | jq -r .thread_id)\ncrit comments add $THREAD \"Your comment here\"\n\n# Or in one line\ncrit comments add $(crit threads create cr-xxx --file foo.rs --line 42 --json | jq -r .thread_id) \"Comment\"\n```\n\n3. Document the approval â†’ merge flow\n\nA subagent failed to add comments because this wasn't clear - it created 14 empty threads.","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-27T19:16:58.360906694Z","created_by":"bob","updated_at":"2026-01-27T19:28:24.071293631Z","closed_at":"2026-01-27T19:28:24.071265318Z","close_reason":"Fixed: ran 'crit agents init' in botty to add complete workflow docs including 'crit comment'","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2cs","title":"Add --conversation flag to threads show","description":"Display thread as a conversation with timestamps and author names in a readable format, rather than structured data.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T17:33:22.333059089Z","created_by":"bob","updated_at":"2026-01-25T17:42:39.683829836Z","closed_at":"2026-01-25T17:42:39.683802655Z","close_reason":"Implemented --conversation flag for threads show - displays thread as human-readable conversation with timestamps","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2fq","title":"Context extraction","description":"Extract code context around thread anchors. Support configurable context lines (default 3). Handle edge cases: file deleted, line at start/end of file.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:25.471996804Z","created_by":"bob","updated_at":"2026-01-25T14:19:41.812319627Z","closed_at":"2026-01-25T14:19:41.812301473Z","close_reason":"Implemented context extraction","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2fq","depends_on_id":"bd-27u","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2fq","depends_on_id":"bd-3q7","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2i3","title":"Add crit review command for full review display","description":"Currently viewing a full review with all threads and comments requires multiple commands:\n\n```bash\ncrit reviews show cr-xxx\ncrit threads list cr-xxx\ncrit threads show th-xxx  # for each thread\n```\n\nAdd a single command that shows the complete review:\n\n```bash\ncrit review cr-xxx\n```\n\nShould display:\n- Review metadata (title, status, author, dates)\n- All threads with their comments inline\n- Code context for each thread\n\nSimilar to `gh pr view` which shows the full PR with comments.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-27T19:16:26.160574345Z","created_by":"bob","updated_at":"2026-01-27T19:35:28.860818651Z","closed_at":"2026-01-27T19:35:28.860745404Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2qu","title":"crit agents command","description":"Manage AGENTS.md integration. 'crit agents init' inserts crit usage instructions into AGENTS.md (or creates it). 'crit agents show' outputs the instructions block to stdout. Use HTML comment markers for idempotent updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T13:24:37.707475007Z","created_by":"bob","updated_at":"2026-01-25T13:54:35.246105685Z","closed_at":"2026-01-25T13:54:35.246089104Z","close_reason":"Implemented crit agents init/show commands","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2qu","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2qu","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2rx","title":"Basic ratatui app scaffold","description":"Set up ratatui with crossterm. Implement basic app loop, event handling, quit functionality. Create reusable widget patterns.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T04:05:05.776604392Z","created_by":"bob","updated_at":"2026-01-28T20:39:00.263375408Z","closed_at":"2026-01-28T20:39:00.263356372Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2rx","depends_on_id":"bd-168","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2rx","depends_on_id":"bd-25a","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-2rx","depends_on_id":"bd-o9a","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2rz","title":"Add 'crit comment' command with auto-thread creation","description":"New command: crit comment <review-id> --file <file> --line <line> <message>\n\n1. Check if thread exists at file+line for this review\n2. If not, create thread automatically\n3. Add comment to thread\n4. Return both thread_id and comment_id\n\nShould also support --lines for ranges (e.g., --lines 10-15)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T20:18:57.530240913Z","created_by":"bob","updated_at":"2026-01-26T20:54:56.172971115Z","closed_at":"2026-01-26T20:54:56.172943904Z","close_reason":"Implemented: crit comment command","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2rz","depends_on_id":"bd-13u","type":"blocks","created_at":"2026-01-26T20:19:02.483001692Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2sw","title":"CLI (crit)","description":"Command-line interface for botcrit","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T04:04:31.875609129Z","created_by":"bob","updated_at":"2026-01-25T13:42:13.079094659Z","closed_at":"2026-01-25T13:42:13.079076555Z","close_reason":"CLI epic - clap structure and init implemented","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ws","title":"Research: jj CLI output formats","description":"Investigate jj log, jj diff, jj show output formats. Determine best way to extract change_id, commit_hash, file diffs. Check if jj has --json or machine-readable output modes.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:20.059371108Z","created_by":"bob","updated_at":"2026-01-25T13:42:09.267385259Z","closed_at":"2026-01-25T13:42:09.267367025Z","close_reason":"Research documented in notes/jj-research.md","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ws","depends_on_id":"bd-3q7","type":"blocks","created_at":"2026-01-25T17:33:17Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-2xl","title":"TUI: selecting file should scroll to it","description":"When selecting a file in the file list, scroll the diff pane to show that file.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T22:43:27.280336344Z","created_by":"bob","updated_at":"2026-01-25T22:45:58.473408580Z","closed_at":"2026-01-25T22:45:58.473376620Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-32d","title":"TUI: full-width box for file section headers","description":"File section headers should be full-width boxes with filename centered, not just inline text.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T22:43:30.665118027Z","created_by":"bob","updated_at":"2026-01-25T22:44:54.496327694Z","closed_at":"2026-01-25T22:44:54.496309360Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-33i","title":"Conversation view improvements","description":"Enhancements for --conversation flag:\n- Add --no-context shorthand for --context 0\n- Add color output when terminal supports it (author names, status indicators, code highlighting)\n- Consider --compact mode for less verbose output","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T18:19:59.544183756Z","created_by":"bob","updated_at":"2026-01-25T19:49:50.497146565Z","closed_at":"2026-01-25T19:49:50.496947722Z","close_reason":"Added --no-context shorthand and color output support for conversation view","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-351","title":"Agent identity resolution","description":"Implement author field resolution with priority: --author flag > CRIT_AGENT env > BOTBUS_AGENT env > USER env. Create a get_agent_identity() function.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:03:53.947969969Z","created_by":"bob","updated_at":"2026-01-25T13:42:00.536244723Z","closed_at":"2026-01-25T13:42:00.536222211Z","close_reason":"Implemented with tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-351","depends_on_id":"bd-jc0","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-35l","title":"No formal approve/block mechanism for reviewers","description":"Currently there's no way for reviewers to formally approve or request changes to a review. The review approval is done by manually running 'crit reviews approve' rather than having reviewers signal their approval state.\n\nSuggested workflow:\n1. Reviewer runs 'crit reviews lgtm <review-id>' to approve\n2. Reviewer runs 'crit reviews block <review-id> --reason=...' to request changes\n3. Review status tracks which reviewers have approved/blocked\n4. 'crit reviews merge' should require approval from all requested reviewers (or at least no blocks)\n\nThis would make the review process more structured and prevent accidentally merging without proper review.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-26T20:16:24.630126243Z","created_by":"bob","updated_at":"2026-01-26T22:40:24.821412298Z","closed_at":"2026-01-26T22:40:24.821388834Z","close_reason":"Implemented lgtm/block voting commands with merge guard","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-36m","title":"Remove --request-id and --expected-hash from comments add","description":"These optimistic concurrency features add complexity without sufficient benefit for a code review tool. Duplicate comments are low-stakes and easily visible. Remove to simplify the CLI.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-25T21:05:37.505169302Z","created_by":"bob","updated_at":"2026-01-25T21:07:56.140979959Z","closed_at":"2026-01-25T21:07:56.140943261Z","close_reason":"Removed --request-id and --expected-hash from comments add. Simplified event struct and projection.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-36z","title":"Agent reviewers hit 400 errors from tool use concurrency issues","description":"When spawning Claude agents as reviewers via botty, one agent hit an API error:\n\n'API Error: 400 due to tool use concurrency issues'\n\nThis is a Claude API issue, not crit. The error happens when Claude makes concurrent tool calls that conflict. This is outside crit's control.\n\nWorkaround: Retry the operation, or ensure agents don't make concurrent file writes.\n\nMarking as P4/backlog since this is not actionable from crit's side.","status":"closed","priority":4,"issue_type":"bug","created_at":"2026-01-26T20:16:17.053925345Z","created_by":"bob","updated_at":"2026-01-26T22:32:54.482003445Z","closed_at":"2026-01-26T22:32:54.481976184Z","close_reason":"can't control","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3bx","title":"Add --body flag to threads create","description":"Currently creating a thread with a comment requires two commands:\n\n```bash\ncrit threads create cr-xxx --file foo.rs --line 42\ncrit comments add th-xxx \"Your comment here\"\n```\n\nThis caused a subagent to create 14 empty threads - it tried `--body` which doesn't exist.\n\nAdd `--body` (or `--message`) flag to `threads create` to create the thread with an initial comment in one step:\n\n```bash\ncrit threads create cr-xxx --file foo.rs --line 42 --body \"Your comment here\"\n```\n\nThis is the common case and should be easy.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T19:16:22.814357002Z","created_by":"bob","updated_at":"2026-01-27T19:28:19.535758275Z","closed_at":"2026-01-27T19:28:19.535696279Z","close_reason":"Already implemented: 'crit comment' command does this - added docs to botty AGENTS.md","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3d5","title":"TUI: comment composition mode","description":"Allow adding comments from within the TUI.\n\n- Press 'c' on a diff line to start composing\n- Text input area appears\n- Submit with Ctrl+Enter, cancel with Esc\n- Uses existing crit comment infrastructure","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-26T21:13:19.071355751Z","created_by":"bob","updated_at":"2026-01-28T20:39:05.224526593Z","closed_at":"2026-01-28T20:39:05.224497258Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3d5","depends_on_id":"bd-wsn","type":"blocks","created_at":"2026-01-26T21:13:24.532975841Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3eo","title":"TUI: clicking files should select them","description":"Mouse click on file in file list should select that file.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T22:43:23.637637188Z","created_by":"bob","updated_at":"2026-01-25T22:47:46.624254501Z","closed_at":"2026-01-25T22:47:46.624227440Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ey","title":"TUI does not display inline comments","description":"Comments are not visible in the review detail view. Need to render thread comments inline between diff lines.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T21:58:54.352027079Z","created_by":"bob","updated_at":"2026-01-25T22:05:40.625304581Z","closed_at":"2026-01-25T22:05:40.625276788Z","close_reason":"Inline comment rendering implemented; test data issue causes no visible comments in demo","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3gk","title":"TUI testing infrastructure with botty","description":"Set up visual/integration testing for the TUI using botty instead of tmux.\n\nbotty is a PTY daemon that can:\n- Spawn processes in headless PTYs\n- Send keystrokes \n- Capture screen snapshots\n- Ideal for deterministic TUI testing\n\nApproach:\n1. botty spawn -- crit tui <review>\n2. botty send <id> 'j' (navigate down)\n3. botty snapshot <id> | assert contains expected content\n4. botty kill <id>\n\nThis replaces ad-hoc tmux scripting with a proper test harness.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T21:13:11.793445219Z","created_by":"bob","updated_at":"2026-01-28T20:39:00.254853801Z","closed_at":"2026-01-28T20:39:00.254835667Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3h7","title":"Design SQLite schema","description":"Design tables for reviews, threads, comments. Include indexes for common queries (unresolved threads by file, open reviews by author). Schema should be rebuildable from event log.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:05.313159862Z","created_by":"bob","updated_at":"2026-01-25T13:42:04.823799624Z","closed_at":"2026-01-25T13:42:04.823780508Z","close_reason":"Schema designed in notes/sqlite-schema.sql","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3h7","depends_on_id":"bd-26n","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-3k4","title":"Clarify comment vs comments add naming","description":"The commands `crit comment` (creates thread) and `crit comments add` (adds to thread) are confusingly similar. Agents may accidentally create new threads when intending to reply.\n\nSuggestion: Consider `crit thread comment <thread_id>` or similar to make the distinction clearer.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-28T00:05:54.347595479Z","created_by":"bob","updated_at":"2026-01-28T20:06:19.525181434Z","closed_at":"2026-01-28T20:06:19.525144825Z","close_reason":"Added top-level 'crit reply <thread_id> <message>' command as clear counterpart to 'crit comment'. Updated 'crit comment' help to reference 'reply'. Existing 'crit comments add' still works.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3k9","title":"Suggest project-based agent name in agents show/init","description":"The agents show/init output should suggest an agent name based on the project directory: <pwd basedir>-dev (e.g. botcrit-dev). Check env first to avoid overriding an already-set identity.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T20:18:45.928188416Z","created_by":"bob","updated_at":"2026-01-28T20:20:37.979288154Z","closed_at":"2026-01-28T20:20:37.979273046Z","close_reason":"Implemented: renamed --author to --agent (with --author alias), updated agents show/init to emphasize --agent flag and suggest project-based name (e.g. botcrit-dev)","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3m0","title":"crit diff shows only .crit/events.jsonl, not actual code changes","description":"When running 'crit diff' from a different workspace than where the review was created, it diffs against the current workspace's @ instead of the review's change.\n\nRoot cause: crit diff uses jj.get_current_commit() which gets @ from current workspace, not the review's jj_change_id.\n\nFix: Should resolve review.jj_change_id to get target commit, similar to how TUI does it:\n- For open reviews: resolve jj_change_id to current commit\n- For merged reviews: use final_commit\n\nThis is the same pattern used in review_detail.rs lines 87-91.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T20:16:12.055339989Z","created_by":"bob","updated_at":"2026-01-26T20:54:51.996937454Z","closed_at":"2026-01-26T20:54:51.996910935Z","close_reason":"Fixed: crit diff now resolves review's jj_change_id to get target commit instead of using workspace @","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3n2","title":"crit status and diff commands","description":"Implement crit status (summary view with drift detection) and crit diff (structured diff output). Support --unresolved-only filter.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:45.935084149Z","created_by":"bob","updated_at":"2026-01-25T16:57:19.370413470Z","closed_at":"2026-01-25T16:57:19.370391358Z","close_reason":"Implemented status command with drift detection and diff command with thread annotations","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3n2","depends_on_id":"bd-168","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3n2","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3n2","depends_on_id":"bd-28d","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3n2","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3n2","depends_on_id":"bd-hk6","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-3oi","title":"TUI inline comments should be truly inline","description":"Comments currently appear after the entire diff. They should be inserted at the relevant line numbers within the diff.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T22:43:15.513260959Z","created_by":"bob","updated_at":"2026-01-28T20:39:05.211274758Z","closed_at":"2026-01-28T20:39:05.211246685Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3oi","depends_on_id":"bd-wsn","type":"blocks","created_at":"2026-01-26T21:13:24.947512197Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3q7","title":"JJ Adapter","description":"Integration with Jujutsu for change tracking and drift detection","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T04:04:15.812406650Z","created_by":"bob","updated_at":"2026-01-25T13:42:08.517224165Z","closed_at":"2026-01-25T13:42:08.517205760Z","close_reason":"JJ Adapter epic - research complete","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3sa","title":"crit comments subcommands","description":"Implement comments add, list. Support --request-id for idempotency and --expected-hash for optimistic locking.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:44.578498880Z","created_by":"bob","updated_at":"2026-01-25T16:55:18.099878538Z","closed_at":"2026-01-25T16:55:18.099856146Z","close_reason":"Implemented comments add/list with request_id and expected_hash support","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3sa","depends_on_id":"bd-168","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3sa","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3sa","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3sa","depends_on_id":"bd-hk6","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-3tl","title":"Replace emoji with unicode/nerdfont glyphs","description":"Replace speech bubble emoji with unicode chars or nerdfont glyphs for consistency.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-25T22:43:19.121248392Z","created_by":"bob","updated_at":"2026-01-25T22:44:28.431164295Z","closed_at":"2026-01-25T22:44:28.431135340Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3tp","title":"Bug: crit uses CWD instead of jj main repo root","description":"When running in a jj workspace, crit uses env::current_dir() as repo_root. This causes each workspace to have its own .crit/ directory with separate events.jsonl files, breaking multi-agent coordination.\n\nFix: Check if .jj/repo is a file (path to main repo) vs directory, and resolve to the canonical repo root.\n\nAffected: All commands that write to .crit/events.jsonl","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-25T23:10:41.389562657Z","created_by":"bob","updated_at":"2026-01-25T23:22:14.444124679Z","closed_at":"2026-01-25T23:22:14.444094112Z","close_reason":"Fixed: resolve_repo_root() now finds main repo for .crit/ while using workspace for jj","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3u1","title":"crit threads subcommands","description":"Implement threads create, list, show, resolve, reopen. Include --context flag for show. Implement batch resolve with --all flag.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:43.410459259Z","created_by":"bob","updated_at":"2026-01-25T16:53:38.331076378Z","closed_at":"2026-01-25T16:53:38.331055429Z","close_reason":"Implemented threads create/list/show/resolve/reopen with context extraction and batch resolve","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3u1","depends_on_id":"bd-168","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3u1","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3u1","depends_on_id":"bd-28d","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3u1","depends_on_id":"bd-2fq","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3u1","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-3u1","depends_on_id":"bd-hk6","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-3v7","title":"Update AGENTS.md with new comment workflow","description":"Update the crit instructions in AGENTS.md to show the new simplified workflow:\n  \nOld: threads create + comments add\nNew: crit comment (single command)","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-26T20:18:57.917765165Z","created_by":"bob","updated_at":"2026-01-26T20:55:45.105791095Z","closed_at":"2026-01-26T20:55:45.105759676Z","close_reason":"Done: updated AGENTS.md instructions with new crit comment workflow","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3v7","depends_on_id":"bd-2rz","type":"blocks","created_at":"2026-01-26T20:19:02.886687095Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3vf","title":"Thread comments not visible in 'crit threads show' output","description":"When running 'crit threads show <thread-id>', the output shows the code context but not the actual comments on the thread.\n\nExpected: Should show thread title, code context, AND all comments\nActual: Shows thread ID, file location, and code context, but comments are missing or truncated\n\nThis makes it difficult to follow the review conversation without manually inspecting events.jsonl.\n\nReproduction:\n1. Create a review with threads that have multiple comments\n2. Run 'crit threads show <thread-id>'\n3. Observe that comments are not shown","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T20:16:20.993093645Z","created_by":"bob","updated_at":"2026-01-26T20:19:37.351537198Z","closed_at":"2026-01-26T20:19:37.351508294Z","close_reason":"Cannot reproduce - comments display correctly in threads show output","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-42j","title":"crit init command","description":"Implement crit init: create .crit/ directory, empty events.jsonl, verify jj repo exists. Handle already-initialized case.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:04:39.602352036Z","created_by":"bob","updated_at":"2026-01-25T13:42:14.008249207Z","closed_at":"2026-01-25T13:42:14.008231063Z","close_reason":"Implemented","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-42j","depends_on_id":"bd-124","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-42j","depends_on_id":"bd-21c","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-42j","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-4mo","title":"crit init should add index.db to .gitignore","description":"index.db is a local cache and should not be tracked in git. crit init should create/update .crit/.gitignore to exclude it.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T21:58:43.317604121Z","created_by":"bob","updated_at":"2026-01-25T21:59:42.217037707Z","closed_at":"2026-01-25T21:59:42.216964089Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-4p2","title":"Add --current flag to threads show","description":"Show thread context at HEAD instead of original commit. Allow agents to see how code has changed since the thread was created.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-25T17:33:18.190111325Z","created_by":"bob","updated_at":"2026-01-25T17:34:32.137969181Z","closed_at":"2026-01-25T17:34:32.137941670Z","close_reason":"Added --current flag to threads show command","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-72n","title":"TUI watch mode","description":"Implement live updates: watch events.jsonl for changes, refresh UI when new events appended. Use notify crate for file watching.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-25T04:05:07.199644198Z","created_by":"bob","updated_at":"2026-01-28T20:39:00.266768209Z","closed_at":"2026-01-28T20:39:00.266750285Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-72n","depends_on_id":"bd-25a","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-72n","depends_on_id":"bd-2rx","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-94p","title":"Rename --author flag to --agent for botbus consistency","description":"The --author global flag should be renamed to --agent to be consistent with botbus conventions. Keep --author as a hidden alias for backwards compatibility.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T20:18:44.831225040Z","created_by":"bob","updated_at":"2026-01-28T20:20:37.969301163Z","closed_at":"2026-01-28T20:20:37.969272870Z","close_reason":"Implemented: renamed --author to --agent (with --author alias), updated agents show/init to emphasize --agent flag and suggest project-based name (e.g. botcrit-dev)","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-d28","title":"Add --self-approve flag to reviews merge","description":"Currently merging a review requires two steps:\n\n```bash\ncrit reviews approve cr-xxx\ncrit reviews merge cr-xxx\n```\n\nFor single-reviewer workflows (self-review, solo projects), add a convenience flag:\n\n```bash\ncrit reviews merge cr-xxx --self-approve\n```\n\nThis approves and merges in one step. The two-step flow makes sense for team reviews but adds friction for personal use.","status":"closed","priority":4,"issue_type":"feature","created_at":"2026-01-27T19:16:58.362915880Z","created_by":"bob","updated_at":"2026-01-27T19:32:42.458434814Z","closed_at":"2026-01-27T19:32:42.458364152Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-fmo","title":"TUI shows .crit files in diff (jj tracking issue)","description":"Review detail shows .crit/events.jsonl and .crit/index.db even though they're not part of the review. Need to investigate jj change tracking assumptions.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T22:43:11.621381978Z","created_by":"bob","updated_at":"2026-01-25T22:44:13.278766755Z","closed_at":"2026-01-25T22:44:13.278748541Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-h7m","title":"Require BOTBUS_AGENT or CRIT_AGENT for identity, add --user flag","description":"Currently agent identity falls through to $USER when no env var is set. This causes agent work to be attributed to the human.\n\nChange:\n1. Require BOTBUS_AGENT or CRIT_AGENT to be set (error if missing)\n2. Add --user flag to explicitly use $USER identity (for human usage)\n3. Keep --author flag for arbitrary identity override","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T23:47:14.219314652Z","created_by":"bob","updated_at":"2026-01-27T23:53:22.359066321Z","closed_at":"2026-01-27T23:53:22.359030113Z","close_reason":"Implemented: require CRIT_AGENT or BOTBUS_AGENT, add --user flag for human identity","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ha3","title":"Bump version to 0.2.0 for comment UX change","description":"Update Cargo.toml version to 0.2.0 to reflect the new comment workflow","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T20:18:57.728849379Z","created_by":"bob","updated_at":"2026-01-26T20:55:44.908432466Z","closed_at":"2026-01-26T20:55:44.908414201Z","close_reason":"Done: version bumped to 0.2.0","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-ha3","depends_on_id":"bd-13u","type":"blocks","created_at":"2026-01-26T20:19:02.686260482Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-hk6","title":"TOON output formatter","description":"Implement TOON encoding for CLI output. Support nested objects (YAML-style) and tabular arrays. Include --json flag to switch to JSON output.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T04:04:41.233971894Z","created_by":"bob","updated_at":"2026-01-25T13:54:35.135504770Z","closed_at":"2026-01-25T13:54:35.135480645Z","close_reason":"Implemented TOON and JSON formatters with tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-hk6","depends_on_id":"bd-12q","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""},{"issue_id":"bd-hk6","depends_on_id":"bd-2sw","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-ium","title":"Add --as flag for agent identity","description":"Every crit command currently requires `export BOTBUS_AGENT=... &&` prefix. Add a `--as <agent>` flag to reduce boilerplate:\n\n```bash\ncrit --as security-reviewer comments add th-3uur \"...\"\n```\n\nAlternatively, a session-scoped config:\n```bash\ncrit config set agent security-reviewer\n```","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T00:05:54.017689674Z","created_by":"bob","updated_at":"2026-01-28T00:14:06.191807236Z","closed_at":"2026-01-28T00:14:06.191777971Z","close_reason":"Already implemented: --author flag does this. Example: crit --author security-reviewer comment ...","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-jc0","title":"Core crate (botcrit_core)","description":"Foundation crate with event types, append-only log, and agent identity resolution","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T04:03:45.574930417Z","created_by":"bob","updated_at":"2026-01-25T13:41:56.168953460Z","closed_at":"2026-01-25T13:41:56.168926209Z","close_reason":"Core crate complete: events, log, identity, IDs all implemented","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-knb","title":"TUI diff shows wrong files (working copy instead of review)","description":"ReviewDetailView compares initial_commit to @ (working copy) instead of the review's actual target commit. Should use jj_change_id to resolve current commit for that change.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-25T21:58:46.860488752Z","created_by":"bob","updated_at":"2026-01-25T22:00:54.429638566Z","closed_at":"2026-01-25T22:00:54.429615573Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-l4z","title":"Add --reviewer singular alias","description":"The 'reviews request' command requires --reviewers (plural) which is awkward when adding a single reviewer. Add --reviewer as an alias for ergonomics:\n  crit reviews request cr-xxx --reviewer bob","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T18:19:58.025356168Z","created_by":"bob","updated_at":"2026-01-25T19:46:33.536840101Z","closed_at":"2026-01-25T19:46:33.536808812Z","close_reason":"Implemented: --description with --desc alias, --message/--msg for comments, --reviewer alias for reviewers","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-o9a","title":"Design: TUI layout and navigation","description":"Design the TUI: review list view, thread list view, thread detail with code context, comment composition. Plan keyboard shortcuts and navigation flow.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T04:05:04.176938649Z","created_by":"bob","updated_at":"2026-01-25T22:53:56.182357740Z","closed_at":"2026-01-25T22:53:56.182339696Z","close_reason":"TUI layout complete: review list + detail view with file panel, diff area, and vim-style navigation","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-o9a","depends_on_id":"bd-25a","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-reo","title":"Update agents show/init text to emphasize --agent flag over env vars","description":"The crit agent instructions (agents show/init) should primarily show the --agent flag for identity since env vars don't persist well in Claude Code. Still mention CRIT_AGENT/BOTBUS_AGENT env vars as an alternative.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T20:18:45.338600430Z","created_by":"bob","updated_at":"2026-01-28T20:20:37.976185297Z","closed_at":"2026-01-28T20:20:37.976168887Z","close_reason":"Implemented: renamed --author to --agent (with --author alias), updated agents show/init to emphasize --agent flag and suggest project-based name (e.g. botcrit-dev)","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-szr","title":"Better empty state messages","description":"Currently shows '[0]:' when no results match filters. Instead show helpful messages like:\n- 'No reviews match the filters'\n- 'No open threads'\n- 'No comments yet'\nContext-aware empty states improve UX.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T18:19:56.278750864Z","created_by":"bob","updated_at":"2026-01-25T19:48:26.447742041Z","closed_at":"2026-01-25T19:48:26.447707095Z","close_reason":"Implemented context-aware empty state messages for all list commands","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-vm0","title":"Feature: crit notify command for botbus integration","description":"Add a 'crit notify' command that integrates with botbus to send notifications:\n\n- crit notify pending: Send messages to all reviewers about their pending reviews\n- crit notify update <review_id>: Notify author/reviewers about an update\n- crit notify resolved <thread_id>: Notify thread participants\n\nThis bridges the gap between crit's data model and real-time agent coordination.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-25T23:21:47.106947635Z","created_by":"bob","updated_at":"2026-01-26T21:13:03.318529878Z","closed_at":"2026-01-26T21:13:03.318498078Z","close_reason":"Unnecessary - agents can use botbus directly","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-w6q","title":"Define Event enum and serialization","description":"Create the Event enum with all variants (ReviewCreated, ThreadCreated, CommentAdded, etc). Implement serde Serialize/Deserialize with JSON Lines format. Include common envelope fields (ts, author, event type).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T04:03:49.987185574Z","created_by":"bob","updated_at":"2026-01-25T13:42:00.525417705Z","closed_at":"2026-01-25T13:42:00.525399330Z","close_reason":"Implemented with tests","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-w6q","depends_on_id":"bd-jc0","type":"blocks","created_at":"2026-01-25T17:33:18Z","created_by":"import","metadata":"{}","thread_id":""}]}
{"id":"bd-wsn","title":"TUI: diff view with inline comment indicators","description":"Render the diff with visual indicators showing where comments exist.\n\n- Show comment count badges at line numbers with threads\n- Highlight lines that have comments\n- Keybinding to jump to next/prev comment\n- Expandable inline comment display (press Enter on a commented line)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-26T21:13:16.925968043Z","created_by":"bob","updated_at":"2026-01-28T20:39:05.201311729Z","closed_at":"2026-01-28T20:39:05.201276653Z","close_reason":"Superseded by dedicated crit-ui project","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-wsn","depends_on_id":"bd-2rx","type":"blocks","created_at":"2026-01-26T21:13:24.310443789Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-x3i","title":"TUI: cache delta output to avoid re-rendering on every keypress","description":"The TUI spawns delta processes on every render cycle, causing severe lag with reviews that have multiple files.\n\nRoot cause: render_with_delta() is called from render_diff_content() on every frame.\n\nFix: Cache the rendered Text output in FileSection and only re-render when:\n- The view is first opened\n- Side-by-side mode is toggled\n- Terminal width changes","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T19:00:11.738512160Z","created_by":"bob","updated_at":"2026-01-27T19:01:40.651808684Z","closed_at":"2026-01-27T19:01:40.651618247Z","close_reason":"Added CachedRender to FileSection, delta output now cached per file","source_repo":".","compaction_level":0,"original_size":0}
