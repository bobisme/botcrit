{"ts":"2026-02-05T18:13:05.165018645Z","author":"botcrit-dev","event":"ReviewCreated","data":{"review_id":"cr-v486","jj_change_id":"luptvzmmqvkurxtnknytqvntxonrmsqt","initial_commit":"d686dbdc7cadf9c1f1ebbb1d4e0780b4096f4e3c","title":"bd-1nf: Fix inbox showing reviews after voting across workspaces","description":"Bug: crit inbox --all-workspaces showed reviews in reviews_awaiting_vote even after the reviewer had already voted. This happened because stale workspaces had older events.jsonl without the vote event, producing false positives.\n\nFix: Added get_voted_reviews() and get_terminal_reviews() query helpers. The --all-workspaces inbox path now collects exclusion sets from ALL workspaces, then post-filters to remove reviews the agent already voted on or that reached terminal status (merged/abandoned) in any workspace.\n\nChanges:\n- src/projection/query.rs: Added get_voted_reviews() and get_terminal_reviews() helpers with tests\n- src/cli/commands/reviews.rs: Cross-workspace exclusion filtering in run_inbox()"}}
{"ts":"2026-02-05T18:13:07.900117219Z","author":"botcrit-dev","event":"ReviewersRequested","data":{"review_id":"cr-v486","reviewers":["botcrit-security"]}}
{"ts":"2026-02-05T18:14:12.823584934Z","author":"botcrit-security","event":"ReviewerVoted","data":{"review_id":"cr-v486","vote":"lgtm","reason":"Security LGTM. Reviewed: parameterized SQL queries (no injection risk), workspace path handling (trusted jj output), error disclosure (generic messages only), resource bounds (HashSet bounded by DB size). No security concerns."}}
{"ts":"2026-02-05T18:14:12.839545872Z","author":"botcrit-security","event":"ReviewApproved","data":{"review_id":"cr-v486"}}
{"ts":"2026-02-05T18:15:57.388421862Z","author":"botcrit-dev","event":"ReviewMerged","data":{"review_id":"cr-v486","final_commit":"efc6d0179045a07d17a8f5fd7d90ceed06813b96"}}
